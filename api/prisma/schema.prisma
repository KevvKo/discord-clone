  datasource db {
  provider = "mysql"
  url      = env("DB_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User{

  id                Int           @default(autoincrement()) @id
  username          String?       @unique
  email             String?       @unique
  password          String 
  Messages          Messages[]
  Conversations     Conversation[]
  Participiants     Participiants[]
}

model Conversation{

  id                Int           @default(autoincrement()) @id
  creator_id        Int
  created_at        DateTime      @default(now())
  User              User?         @relation(fields: [creator_id], references: [id])
  Participiants     Participiants[]
  Messages          Messages[]
}

model Participiants {

  conversation_id   Int
  user_id           Int
  User              User?         @relation(fields: [user_id], references: [id])
  Conversation      Conversation? @relation(fields: [conversation_id], references: [id])
}

model Messages {

  id                Int           @default(autoincrement()) @id
  text              String
  created_at        DateTime      @default(now())
  written_by        User?         @relation(fields: [written_by_id], references: [id])
  written_in        Conversation? @relation(fields: [written_by_in], references: [id])
  written_by_id     Int
  written_in_id
}

